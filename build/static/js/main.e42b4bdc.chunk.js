(this["webpackJsonpredux-sandbox"]=this["webpackJsonpredux-sandbox"]||[]).push([[0],{31:function(e,a,t){e.exports=t(58)},36:function(e,a,t){},58:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(26),c=t.n(r),m=t(8),i=t(7),s=(t(36),function(){return n.a.createElement(l.Fragment,null,n.a.createElement("div",{className:"loadingio-spinner-wedges-bckcrtwvkwo"},n.a.createElement("div",{className:"loading"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("div",null)),n.a.createElement("div",null,n.a.createElement("div",null)),n.a.createElement("div",null,n.a.createElement("div",null)),n.a.createElement("div",null,n.a.createElement("div",null))))))}),o=t(5),u=function(e){var a=e.image,t=e.FilmName,r=e.id,c=e.video,m=e.genre,s=Object(l.useState)(!1),u=Object(i.a)(s,2),d=u[0],E=u[1],_=Object(l.useState)(!1),g=Object(i.a)(_,2),v=g[0],f=g[1];Object(l.useEffect)((function(){var e="";return d&&(e=function(e){return setTimeout((function(){e(!0)}),1e3)}(f)),function(){f(!1),clearInterval(e)}}),[d]);return n.a.createElement("article",{className:"small-movie-card catalog__movies-card",onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)}},v&&n.a.createElement((function(e){var a=e.video;return n.a.createElement("video",{className:"small-movie-card__image",autoPlay:!0,controls:!1},n.a.createElement("source",{src:a,type:"video/mp4"}))}),{video:c}),!v&&n.a.createElement(l.Fragment,null,n.a.createElement("div",{className:"small-movie-card__image"},n.a.createElement("img",{src:a,alt:t,width:"280",height:"175"})),n.a.createElement("h3",{className:"small-movie-card__title"},n.a.createElement(o.b,{to:"/".concat(r),className:"small-movie-card__link",href:"movie-page.html"},t,"   ",m))))},d=function(e){var a=e.dataFilms,t=e.filter,l=void 0===t?[]:t,r=a.map((function(e){return l.includes(e.genre)||0==l?n.a.createElement(u,{id:e.id,key:e.id,FilmName:e.name,image:e.preview_image,video:e.preview_video_link,genre:e.genre}):null}));return n.a.createElement("div",{className:"catalog__movies-list"},r)},E=t(29),_=t.n(E),g=function(e){var a=e.iconClass,t=e.title,l=e.clickHandler;return n.a.createElement("button",{onClick:l,className:"btn btn--list movie-card__button",type:"button"},n.a.createElement("i",{className:a},"\xa0"),n.a.createElement("span",null,t))},v=function(e){var a=e.posterImage,t=e.title,l=e.genre,r=e.year,c=e.iconClasses,m=e.addFilmHandler;return n.a.createElement("div",{className:"movie-card__wrap"},n.a.createElement("div",{className:"movie-card__info"},n.a.createElement("div",{className:"movie-card__poster"},n.a.createElement("img",{src:a,alt:t,width:"218",height:"327"})),n.a.createElement("div",{className:"movie-card__desc"},n.a.createElement("h2",{className:"movie-card__title"},t),n.a.createElement("p",{className:"movie-card__meta"},n.a.createElement("span",{className:"movie-card__genre"},l),n.a.createElement("span",{className:"movie-card__year"},r)),n.a.createElement("div",{className:"movie-card__buttons"},n.a.createElement(g,{iconClass:"fa fa-lg fa-play-circle-o",title:"Play"}),n.a.createElement(g,{iconClass:c,title:"My list",clickHandler:m})))))},f=function(e){var a=e.image;return n.a.createElement("div",{className:"movie-card__bg"},n.a.createElement("img",{src:a,alt:"The Grand Budapest Hotel"}))},p=t(30),N=t.n(p),h=function(){return N()("https://htmlacademy-react-2.appspot.com/wtw/films")},y=function(){return{type:"FETCH_FILMS_REQUEST"}},b=Object(m.f)((function(e){var a=e.match,t=e.dataFilms,r=e.dispatch,c=e.myFilmList,m=t[a.params.id-1]||t[0],i=m.id,s=m.name,o=m.genre,u=m.released,d=m.poster_image,E=m.background_image,g=c.find((function(e){return e.id===i})),p=_()({"fa fa-lg fa-plus":!g,"fa fa-lg fa-check":g});return n.a.createElement(l.Fragment,null,n.a.createElement(f,{image:E}),n.a.createElement(v,{addFilmHandler:function(){r({type:"ADD_FILM_ON_MY_LIST",payload:m})},posterImage:d,genre:o,year:u,title:s,iconClasses:p}))})),F=t(12),C=t(11),O=function(e,a){switch(a.type){case"FETCH_FILMS_REQUEST":return console.log("\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0432 \u0442\u0440\u0443"),Object(C.a)({},e,{loading:!0,error:null});case"FETCH_FILMS_SUCCESS":return Object(C.a)({},e,{loading:!1,error:null,films:a.payload});case"FETCH_FILMS_FAILURE":return{films:[],loading:!1,error:a.payload,myFilmList:[]};case"ADD_FILM_ON_MY_LIST":return e.myFilmList.find((function(e){return e.id===a.payload.id}))?Object(C.a)({},e):Object(C.a)({},e,{myFilmList:[].concat(Object(F.a)(e.myFilmList),[a.payload])});default:return e}},j=Object(l.createContext)(),L={loading:!0,error:!1,films:[],myFilmList:[]},k=function(e){var a=e.children,t=Object(l.useReducer)(O,L);return n.a.createElement(j.Provider,{value:t},a)},S=function(e){var a=e.headerTitle,t=a?"page-header user-page__head":"page-header movie-card__head";return n.a.createElement("header",{className:t},n.a.createElement("div",{className:"logo"},n.a.createElement(o.b,{to:"/",className:"logo__link"},n.a.createElement("span",{className:"logo__letter logo__letter--1"},"W"),n.a.createElement("span",{className:"logo__letter logo__letter--2"},"T"),n.a.createElement("span",{className:"logo__letter logo__letter--3"},"W"))),a&&n.a.createElement("h1",{className:"page-title user-page__title"},a),n.a.createElement(o.b,{to:"/mylist",className:"user-block"},n.a.createElement("div",{className:"user-block__avatar"},n.a.createElement("img",{src:"img/avatar.jpg",alt:"User avatar",width:"63",height:"63"}))))},T=function(){return n.a.createElement("footer",{className:"page-footer"},n.a.createElement("div",{className:"logo"},n.a.createElement("a",{className:"logo__link logo__link--light"},n.a.createElement("span",{className:"logo__letter logo__letter--1"},"W"),n.a.createElement("span",{className:"logo__letter logo__letter--2"},"T"),n.a.createElement("span",{className:"logo__letter logo__letter--3"},"W"))),n.a.createElement("div",{className:"copyright"},n.a.createElement("p",null,"\xa9 2019 What to watch Ltd.")))},w=function(e){var a=e.setFilter,t=[{"All genres":[""]},{Comedies:["Comedy"]},{Crime:["Crime"]},{Dramas:["Drama"]},{Action:["Action"]},{"Kids & Family":["Fantasy","Adventure"]},{Thrillers:["Thriller"]}].map((function(e,t){return n.a.createElement("li",{onClick:function(){return t=Object.values(e),void a.apply(void 0,Object(F.a)(t));var t},key:t,className:"catalog__genres-item catalog__genres-item--active"},n.a.createElement(o.b,{to:"",className:"catalog__genres-link"},Object.keys(e)))}));return n.a.createElement("ul",{className:"catalog__genres-list"},t)},I=function(e){var a=e.films,t=e.loading,r=Object(l.useState)(""),c=Object(i.a)(r,2),m=c[0],o=c[1];return n.a.createElement("section",{className:"catalog"},n.a.createElement("h2",{className:"catalog__title visually-hidden"},"Catalog"),n.a.createElement(w,{setFilter:o}),t&&n.a.createElement(s,null),!t&&null!==a&&n.a.createElement(d,{dataFilms:a,filter:m}),n.a.createElement("div",{className:"catalog__more"},n.a.createElement("button",{className:"catalog__button",type:"button"},"Show more")))},M=function(){var e=Object(l.useContext)(j),a=Object(i.a)(e,2),t=a[0],r=a[1],c=t.films,m=t.loading,o=(t.error,t.myFilmList);return console.log(o),Object(l.useEffect)((function(){!function(e){e(y),h().then((function(a){return e({type:"FETCH_FILMS_SUCCESS",payload:a.data})})).catch((function(a){return e(function(e){return{type:"FETCH_FILMS_FAILURE",payload:e}}(a))}))}(r)}),[r]),n.a.createElement(l.Fragment,null,n.a.createElement("section",{className:"movie-card"},n.a.createElement(S,null),m&&n.a.createElement(s,null),!m&&null!==c&&n.a.createElement(b,{myFilmList:o,dataFilms:c,dispatch:r})),n.a.createElement("div",{className:"page-content"},n.a.createElement(I,{loading:m,films:c}),n.a.createElement(T,null)))},x=function(){return n.a.createElement("div",null,"SinglePageFilm")},H=function(){var e=Object(l.useContext)(j),a=Object(i.a)(e,2),t=a[0],r=(a[1],t.myFilmList);return n.a.createElement(l.Fragment,null,n.a.createElement("div",{className:"user-page"},n.a.createElement(S,{headerTitle:"My list"}),n.a.createElement("section",{className:"catalog"},n.a.createElement("h2",{className:"catalog__title visually-hidden"},"Catalog"),n.a.createElement(d,{dataFilms:r})),n.a.createElement(T,null)))},A=function(){return n.a.createElement(m.c,null,n.a.createElement(m.a,{path:"/film/:id",exact:!0,component:x}),n.a.createElement(m.a,{path:"/mylist",exact:!0,component:H}),n.a.createElement(m.a,{path:"/:id?",exact:!0,component:M}))},U=function(){return n.a.createElement("div",null,n.a.createElement(k,null,n.a.createElement(o.a,null,n.a.createElement(A,null))))};a.default=U;c.a.render(n.a.createElement(U,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.e42b4bdc.chunk.js.map